{{>/layout/header}}
<!--지도 시작-->
<div class="m_padding_medium">
  <div id="map" style="width:100%;height:400px;"></div>
  <!--지도 종료-->
  <!--메인검색버튼 시작-->
  <h2 class="m_sub_title m_mt_5">전체검색</h2>
  <hr>
  <div class="m_padding_small">
    <div class="container-fluid d-flex">
      <input id="search-input" class="form-control me-2" type="search" placeholder="검색" aria-label="Search">
      <button id="search-btn" class="btn btn-outline-success" type="submit" onclick="addrSearch()">Search</button>

    </div>
  </div>
  <!--메인검색버튼 끝-->

  <!--상세검색버튼 시작-->
  <div>
    <h2 class="m_sub_title mt-5">상세검색</h2>
    <hr>
    <div class="mt-5 d-flex">
      <div class="container-fluid">
        <form class="flex-fill m_div_flex_center">
          <!--
          https://www.jqueryscript.net/form/Dynamic-jQuery-Cascading-Dropdown-Lists-Plugin.html
          스크립트 사용법 공부 후 지역 Ajax 처리
        -->
          <div id="example1" class="bs-docs-example d-flex">
            <select class="step1 me-2 animallist-select-box" onchange="boardSelect(this.value);">
              <option selected disabled>지역</option>
              <option value="seoul">서울</option>
              <option value="busan">부산</option>
              <option value="gyeongnam">경남</option>
            </select>
            <select class="step2 me-2 animallist-select-box">
              <option selected disabled>시/군/구</option>
              <option>강남구</option>
              <option>서초구</option>
              <option>광진구</option>
            </select>
            <select class="step3 me-2 animallist-select-box">
              <option selected disabled>동/읍/면</option>
              <option>청담동</option>
              <option>압구정동</option>
              <option>신사동</option>
              <option>논현동</option>
            </select>
          </div>
          <select class="me-2 animallist-select-box">
            <option selected disabled>종류</option>
            <option>강아지</option>
            <option>고양이</option>
            <option>기타</option>
          </select>
          <select class="me-2 animallist-select-box">
            <option selected disabled>품종</option>
            <option>말티즈</option>
            <option>치와와</option>
            <option>진돗개</option>
          </select>
          <div style="width: 170px;" class="d-flex">주말운영</div>
          <label class="form-switch">
            <input type="checkbox">
            <i></i>
          </label>
          <input class="form-control me-2" type="search" placeholder="검색" aria-label="Search">
          <button class="btn btn-outline-success" type="submit">Search</button>
        </form>
      </div>
    </div>
  </div>
  <!--상세검색버튼 끝-->

  <!--검색결과테이블 시작-->
  <div class="d-flex flex-column m_mt_5">
    <table class="table">
      <thead>
        <tr>
          <th scope="col">No</th>
          <th scope="col">지역</th>
          <th scope="col">보호소명</th>
          <th scope="col">주소</th>
          <th scope="col">운영시간</th>
          <th scope="col">주말운영여부</th>
          <th scope="col">전화번호</th>
          <th scope="col">구조대상동물</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <div class="d-flex m_text_align_center">
            <th scope="row" style="vertical-align: middle;">1</th>
            <td style="vertical-align: middle;">부산</td>
            <td style="vertical-align: middle;">누렁이보호소</td>
            <td style="vertical-align: middle;">부산광역시 연제구 중앙대로 1001</td>
            <td style="vertical-align: middle;">09:00~18:00</td>
            <td style="vertical-align: middle;">O</td>
            <td style="vertical-align: middle;">051-888-1001</td>
            <td style="vertical-align: middle;">누렁이만보호</td>
          </div>
        </tr>
        <tr>
          <th scope="row" style="vertical-align: middle;">2</th>
          <td style="vertical-align: middle;">부산</td>
          <td style="vertical-align: middle;">백구보호소</td>
          <td style="vertical-align: middle;">부산광역시 연제구 중앙대로 1002</td>
          <td style="vertical-align: middle;">09:00~18:00</td>
          <td style="vertical-align: middle;">X</td>
          <td style="vertical-align: middle;">051-888-1002</td>
          <td style="vertical-align: middle;">백구만보호</td>
        </tr>
        <tr>
          <th scope="row" style="vertical-align: middle;">3</th>
          <td style="vertical-align: middle;">부산</td>
          <td style="vertical-align: middle;">고양이보호소</td>
          <td style="vertical-align: middle;">부산광역시 연제구 중앙대로 1003</td>
          <td style="vertical-align: middle;">09:00~18:00</td>
          <td style="vertical-align: middle;">O</td>
          <td style="vertical-align: middle;">051-888-1003</td>
          <td style="vertical-align: middle;">고양이만보호</td>
        </tr>
      </tbody>
    </table>
  </div>
  <!--검색결과테이블 끝-->

  <script>
    // 지도
    let x = 37.3595704;
    let y = 127.105399;

    let map = new naver.maps.Map('map', {
      center: new naver.maps.LatLng(x, y),
      zoom: 12
    });

    // 마커
    let marker = new naver.maps.Marker({
      map: map,
      position: new naver.maps.LatLng(x, y)
    });

    // 전체검색
    function addrSearch() {
      let addr = $("#search-input").val();
      naver.maps.Service.geocode({
        address: addr
      }, function (status, response) {
        if (status !== naver.maps.Service.Status.OK) {
          return alert('Something wrong!');
        }

        let responseParse = response.result; // 검색 결과의 배열
        console.log(responseParse);

        let x = responseParse.items[0].point.x;
        let y = responseParse.items[0].point.y;
        // do Something
        console.log(x);
        console.log(y);

        let map = new naver.maps.Map('map', {
          center: new naver.maps.LatLng(x, y),
          zoom: 12
        });
        let marker = new naver.maps.Marker({
          map: map,
          position: new naver.maps.LatLng(x, y)
        });
      });
    }
  </script>

  {{>/layout/footer}}